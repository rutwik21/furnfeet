(()=>{var e={};e.id=565,e.ids=[565],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},80087:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(3528);let a=(0,r.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1188:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>d.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c});var r=t(67096),a=t(16132),n=t(37284),d=t.n(n),i=t(32564),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(s,l);let c=["",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,95850)),"C:\\Users\\Truecopy\\Desktop\\New folder (2)\\furnfeet\\src\\app\\cart\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,55168)),"C:\\Users\\Truecopy\\Desktop\\New folder (2)\\furnfeet\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\Truecopy\\Desktop\\New folder (2)\\furnfeet\\src\\app\\cart\\page.tsx"],m="/cart/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},60548:(e,s,t)=>{Promise.resolve().then(t.bind(t,31120))},31120:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>page});var r=t(30784),a=t(80467),n=t(45304),d=t(9885),i=t(57505),l=t(66558),c=t(19098);let o=c.z.object({name:c.z.string(),contact:c.z.number().or(c.z.string()),addressLine1:c.z.string(),addressLine2:c.z.string().nullable(),city:c.z.string(),state:c.z.string(),pinCode:c.z.string()});c.z.object({id:c.z.string(),name:c.z.string(),contact:c.z.number().or(c.z.string()),addressLine1:c.z.string(),addressLine2:c.z.string().nullable(),city:c.z.string(),state:c.z.string(),pinCode:c.z.string(),isDefaultAddress:c.z.boolean()});var m=t(83894),x=t(37422),u=t(9941),p=t(80087),h=t(1264);let components_ConfirmAddress=({handleAddressConfirmation:e})=>{let[s,t]=(0,d.useState)([]),{register:g,handleSubmit:f,formState:{errors:j}}=(0,l.cI)({resolver:(0,m.F)(o)}),[y,N]=(0,d.useState)(!1),{mutate:b,isLoading:v}=x.S.user.addNewAddress.useMutation({onError:e=>{if(e.data?.code==="BAD_REQUEST"){u.toast.error("Please provide all the valid details");return}if(e instanceof c.jm){u.toast.error(e.issues[0].message);return}u.toast.error("Something went wrong. Please try again.")},onSuccess:e=>{e&&t(e),window.document.querySelector("#newAddressForm").reset(),N(!1)}}),w=x.S.user.updateAddress.useMutation({onError:e=>{if(e.data?.code==="BAD_REQUEST"){u.toast.error("Please provide all the valid details");return}if(e instanceof c.jm){u.toast.error(e.issues[0].message);return}u.toast.error("Something went wrong. Please try again.")},onSuccess:e=>{e&&t(e)}});x.S.user.allAddresses.useQuery(void 0,{onError:e=>{console.log(e)},onSuccess:e=>{e&&t(e)}});let onUpadteAddressSubmit=({id:e,name:s,contact:t,addressLine1:r,addressLine2:a,city:n,state:d,pinCode:i,isDefaultAddress:l})=>{t=Number(t),w.mutate({id:e,name:s,contact:t,addressLine1:r,addressLine2:a,city:n,state:d,pinCode:i,isDefaultAddress:l})};return r.jsx("div",{className:"rounded-lg border-2 border-dashed border-zinc-200 p-4 md:p-12 lg:col-span-7",children:(0,r.jsxs)("div",{className:"",children:[(0,r.jsxs)("div",{className:"flex col-span-full justify-between border-b pb-4 mb-4",children:[r.jsx("h2",{className:"text-xl font-bold my-1 text-gray-900",children:"Your Addresses"}),r.jsx(n.z,{className:" py-2 px-4",onClick:()=>N(!y),children:y?"Cancel":"Add New Address"})]}),y&&(0,r.jsxs)("div",{className:"rounded-lg p-6 mb-6 bg-gray-50 ",children:[r.jsx("h2",{className:"text-lg font-medium my-2 text-gray-900",children:"Add New Address"}),(0,r.jsxs)("form",{id:"newAddressForm",onSubmit:f(({name:e,contact:s,addressLine1:t,addressLine2:r,city:a,state:n,pinCode:d})=>{b({name:e,contact:s=Number(s),addressLine1:t,addressLine2:r,city:a,state:n,pinCode:d})}),children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx(i.I,{type:"text",placeholder:"Name*",...g("name"),className:(0,a.cn)({"focus-visible:ring-red-500":j.name})}),j?.name&&r.jsx("p",{className:"text-sm text-red-500",children:j.name.message})]}),(0,r.jsxs)("div",{children:[r.jsx(i.I,{type:"number",placeholder:"Mobile no.*",...g("contact"),className:(0,a.cn)({"focus-visible:ring-red-500":j.contact})}),j?.contact&&r.jsx("p",{className:"text-sm text-red-500",children:j.contact.message})]}),(0,r.jsxs)("div",{children:[r.jsx(i.I,{type:"text",placeholder:"Address Line 1*",...g("addressLine1"),className:(0,a.cn)({"focus-visible:ring-red-500":j.addressLine1}),required:!0}),j?.addressLine1&&r.jsx("p",{className:"text-sm text-red-500",children:j.addressLine1.message})]}),(0,r.jsxs)("div",{children:[r.jsx(i.I,{type:"text",placeholder:"Address Line 2",...g("addressLine2"),className:(0,a.cn)({"focus-visible:ring-red-500":j.addressLine2})}),j?.addressLine2&&r.jsx("p",{className:"text-sm text-red-500",children:j.addressLine2.message})]}),(0,r.jsxs)("div",{children:[r.jsx(i.I,{type:"text",placeholder:"City*",...g("city"),className:(0,a.cn)({"focus-visible:ring-red-500":j.city}),required:!0}),j?.city&&r.jsx("p",{className:"text-sm text-red-500",children:j.city.message})]}),(0,r.jsxs)("div",{children:[r.jsx(i.I,{type:"text",placeholder:"State*",...g("state"),className:(0,a.cn)({"focus-visible:ring-red-500":j.state}),required:!0}),j?.state&&r.jsx("p",{className:"text-sm text-red-500",children:j.state.message})]}),(0,r.jsxs)("div",{children:[r.jsx(i.I,{type:"text",placeholder:"Pin Code*",...g("pinCode"),className:(0,a.cn)({"focus-visible:ring-red-500":j.pinCode}),required:!0}),j?.pinCode&&r.jsx("p",{className:"text-sm text-red-500",children:j.pinCode.message})]})]}),(0,r.jsxs)(n.z,{type:"submit",className:"mt-4 py-2 px-4",children:[v?r.jsx(p.Z,{className:"w-4 h-4 animate-spin mr-1.5"}):null,"Add Address"]})]})]}),r.jsx("div",{className:"space-y-4",children:s.map(s=>(s.isDefaultAddress&&e(!0),(0,r.jsxs)("div",{className:(0,a.cn)("border rounded-lg p-6",{"bg-green-50 border-primary":s.isDefaultAddress,"bg-white border-gray-500":!s.isDefaultAddress}),children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("h2",{className:"text-xl w-auto font-semibold text-gray-900",children:s.name}),s.isDefaultAddress?(0,r.jsxs)(n.z,{size:"sm",variant:"ghost",className:"bg-green-100 text-black",children:["Selected ",r.jsx("span",{children:r.jsx(h.Z,{className:"w-4 ms-1"})})]}):r.jsx(n.z,{onClick:()=>(s.addressLine2=void 0!=s.addressLine2?s.addressLine2:null,onUpadteAddressSubmit({id:s.id,name:s.name,contact:s.contact,addressLine1:s.addressLine1,addressLine2:s.addressLine2,city:s.city,state:s.state,pinCode:s.pinCode,isDefaultAddress:!0})),size:"sm",className:"bg-secondary text-black",children:"Select"})]}),(0,r.jsxs)("p",{children:[s.addressLine1,", ",s.addressLine2]}),(0,r.jsxs)("p",{children:[s.city,", ",s.state," - ",s.pinCode]}),(0,r.jsxs)("p",{className:"text-sm w-auto font-semibold text-gray-900",children:["Mobile No. : ",s.contact]})]},s.id)))})]})})};var g=t(60986),f=t(44370),j=t(56206),y=t(52451),N=t.n(y),b=t(11440),v=t.n(b),w=t(57114);let page=()=>{let{items:e,removeItem:s,reduceItem:t,addItem:i,clearCart:l}=(0,f.j)(),[c,o]=(0,d.useState)(!1),[m,y]=(0,d.useState)(!1),b=(0,w.useRouter)(),{mutate:z}=x.S.payment.markOrderAsPaid.useMutation({onError:e=>{console.log(e),u.toast.error("Something went wrong! Please reach out to us if you faced some issue while payment")},onSuccess:e=>{e?(l(),b.push(`http://localhost:3000/thank-you?orderId=${e}`)):u.toast.error("Something went wrong! Please reach out to us if you faced some issue while payment")}}),{mutate:S,isLoading:_}=x.S.payment.createSession.useMutation({onSuccess:({orderId:e,key_id:s})=>{if(e&&s){let t=new window.Razorpay({key:s,order_id:e,name:"furnfeet",description:"Test Transaction",handler:function(s){s.orderId=e,z(s)},image:"https://furnfeettest.s3.eu-north-1.amazonaws.com/ff_logo.png",theme:{color:"#f97316"}});t.open(),t.on("payment.failed",function(e){u.toast.error(e.error.reason)})}else alert("something went wrong")}}),A=e.map(({product:e,qty:s,dimensions:t,price:r,totalPrice:a})=>({productId:e.id,qty:s,dimensions:t,price:r,totalPrice:a})),[C,k]=(0,d.useState)(!1);(0,d.useEffect)(()=>{k(!0)},[]);let P=e.reduce((e,{price:s,qty:t})=>{let r="string"!=typeof s?s:null;return r?e+r*t:0},0);return(0,r.jsxs)("div",{className:"bg-white",children:[r.jsx("script",{src:"https://checkout.razorpay.com/v1/checkout.js",defer:!0}),(0,r.jsxs)("div",{className:"mx-auto max-w-2xl px-4 pb-24 pt-16 sm:px-6 lg:max-w-7xl lg:px-8",children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl",children:"Shopping Cart"}),(0,r.jsxs)("div",{className:"mt-12 lg:grid lg:grid-cols-12 lg:items-start lg:gap-x-12 xl:gap-x-16",children:[(0,r.jsxs)("div",{className:(0,a.cn)("lg:col-span-7",{"rounded-lg border-2 border-dashed border-zinc-200 p-12":C&&0===e.length},{hidden:c}),children:[r.jsx("h2",{className:"sr-only",children:"Items in your shopping cart"}),C&&0===e.length?(0,r.jsxs)("div",{className:"flex h-full flex-col items-center justify-center space-y-1",children:[r.jsx("div",{"aria-hidden":"true",className:"relative mb-4 h-40 w-40 text-muted-foreground",children:r.jsx(N(),{src:"/emptyCart.png",fill:!0,loading:"eager",alt:"empty shopping cart hippo"})}),r.jsx("h3",{className:"font-semibold text-2xl",children:"Your cart is empty"}),r.jsx("p",{className:"text-muted-foreground text-center",children:"Whoops! Nothing to show here yet."})]}):null,r.jsx("ul",{className:(0,a.cn)({"divide-y divide-gray-200 border-b border-t border-gray-200":C&&e.length>0}),children:C&&e.map(e=>{let d=g.Z.find(s=>s.value===e.product.category)?.label,{image:l}=e.product.images[0];return(0,r.jsxs)("li",{className:"flex py-6 sm:py-10",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"relative h-24 w-24",children:"string"!=typeof l&&l.url?r.jsx(N(),{fill:!0,src:l.url,alt:"product image",className:"h-full w-full rounded-md object-cover object-center sm:h-48 sm:w-48"}):null})}),(0,r.jsxs)("div",{className:"ml-4 flex flex-1 flex-col justify-between sm:ml-6",children:[(0,r.jsxs)("div",{className:"relative pr-9 sm:grid sm:grid-cols-2 sm:gap-x-6 sm:pr-0",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"flex justify-between",children:r.jsx("h3",{className:"text-sm",children:r.jsx(v(),{href:`/product/${e.product.id}`,className:"font-medium text-gray-700 hover:text-gray-800",children:e.product.name})})}),r.jsx("div",{className:"mt-1 flex text-sm",children:(0,r.jsxs)("p",{className:"text-muted-foreground",children:["Category: ",d]})}),(0,r.jsxs)("div",{className:"mt-1 gap-2 flex text-sm",children:[r.jsx("p",{className:"text-muted-foreground",children:"Qty:"}),(0,r.jsxs)("div",{className:"flex gap-2 px-2 bg-gray-50 rounded-sm  text-sm",children:[r.jsx("button",{onClick:()=>t(e.product),className:"flex self-center",children:"-"}),r.jsx("p",{children:e.qty}),r.jsx("button",{onClick:()=>i(e),className:"flex self-center",children:"+"})]})]}),r.jsx("p",{className:"mt-1 text-sm font-medium text-gray-900",children:"string"!=typeof e.price?(0,a.T)(e.price*e.qty):null})]}),r.jsx("div",{className:"mt-4 sm:mt-0 sm:pr-9 w-20",children:r.jsx("div",{className:"absolute right-0 top-0",children:r.jsx(n.z,{"aria-label":"remove product",onClick:()=>s(e.product.id),variant:"ghost",children:r.jsx(j.Z,{className:"h-5 w-5","aria-hidden":"true"})})})})]}),(0,r.jsxs)("p",{className:"mt-4 flex space-x-2 text-sm text-gray-700",children:[r.jsx(h.Z,{className:"h-5 w-5 flex-shrink-0 text-green-500"}),r.jsx("span",{children:"Eligible for instant delivery"})]})]})]},e.product.id)})})]}),r.jsx("div",{className:(0,a.cn)("lg:col-span-7",{"rounded-lg border-2 border-dashed border-zinc-200 p-12":C&&0===e.length},{hidden:!c}),children:r.jsx(components_ConfirmAddress,{handleAddressConfirmation:e=>{y(e)}})}),(0,r.jsxs)("section",{className:"mt-16 rounded-lg bg-gray-50 px-4 py-6 sm:p-6 lg:col-span-5 lg:mt-0 lg:p-8",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Order summary"}),(0,r.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Subtotal"}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:C?(0,a.T)(P):r.jsx(p.Z,{className:"h-4 w-4 animate-spin text-muted-foreground"})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-200 pt-4",children:[r.jsx("div",{className:"flex items-center text-sm text-muted-foreground",children:r.jsx("span",{children:"Flat Transaction Fee"})}),r.jsx("div",{className:"text-sm font-medium text-gray-900",children:C?(0,a.T)(10):r.jsx(p.Z,{className:"h-4 w-4 animate-spin text-muted-foreground"})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-200 pt-4",children:[r.jsx("div",{className:"text-base font-medium text-gray-900",children:"Order Total"}),r.jsx("div",{className:"text-base font-medium text-gray-900",children:C?(0,a.T)(P+10):r.jsx(p.Z,{className:"h-4 w-4 animate-spin text-muted-foreground"})})]})]}),r.jsx("div",{className:"mt-6",children:c?(0,r.jsxs)(n.z,{disabled:0===e.length||c&&!m||0===P,onClick:()=>S(A),className:"w-full",size:"lg",children:[_?r.jsx(p.Z,{className:"w-4 h-4 animate-spin mr-1.5"}):null,"Make Payment"]}):(0,r.jsxs)(n.z,{disabled:0===e.length||0===P,onClick:()=>o(!0),className:"w-full",size:"lg",children:[_?r.jsx(p.Z,{className:"w-4 h-4 animate-spin mr-1.5"}):null,"Checkout"]})})]})]})]})]})}},95850:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>d,__esModule:()=>n,default:()=>l});var r=t(95153);let a=(0,r.createProxy)(String.raw`C:\Users\Truecopy\Desktop\New folder (2)\furnfeet\src\app\cart\page.tsx`),{__esModule:n,$$typeof:d}=a,i=a.default,l=i}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[576,408,449],()=>__webpack_exec__(1188));module.exports=t})();